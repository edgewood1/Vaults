# Middleware

## 1. Definition
Middleware is the "plumbing" of your backend. It refers to functions that execute *during* the request lifecycle, before the final request handler sends a response.

## 2. Configuration (Project Root)
*   **middleware.ts (Next.js):** A single file at the root (or inside `src/`) used to run code before a request is completed (e.g., for auth, redirects).

## 3. Process Flow
When a request arrives, it passes through configured middleware functions:

1.  **Static Asset Handling:** Checks if the request is for a static file (image, css). If so, the file is sent immediately.
2.  **CORS Handling:** Checks if the request is allowed from the client's origin.
3.  **Authentication/Authorization:** Checks if the user is logged in and has permission.
4.  **Request Logging:** Logs information about the request for debugging.
5.  **Body Parsing:** Parses JSON or form data in the request body (for POST/PUT requests).

If the request passes all middleware, it proceeds to the **Router**.

*Next Step:* [[2. Routing]]