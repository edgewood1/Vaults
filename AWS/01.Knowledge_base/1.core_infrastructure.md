# AWS Core Services

Step 1: Master the Vocabulary**
* **Source:** `01.Knowledge_base/1.core_infrastructure.md`
* **Drill:** Create flashcards for these 4 definitions. You must be able to explain them simply:
    1.  **VPC vs. Subnet:** (House vs. Room).
    2.  **NAT Gateway:** (The "One-way valve" for private internet access).
    3.  **Security Group:** (The "Bouncer" firewall).
    4.  **IAM Role:** (The "ID Badge" permissions).

## Identity and Access Management (IAM) ðŸ”‘

1. Authentication (the â€œwhoâ€).
	1. Verifies who you are.  We make sure identity is â€œauthenticâ€.  
		1. IAM User - a permenent identity for a person or application.  Has a long-term password or keys
		2. IAM Role - a temporary identity wihtout a permentnt password.  A user, app. Or AWS service assumes a role to get temporary permissions: Example:* A Lambda function assumes a role to write logs or access a database.
		3. IAM Group - a collection of Users - you cannot put a role into a Group; Groups are only for organizing users.  
2. Authorization (The â€œwhatâ€)
	1. Determines what you can do.  We make sure the user is â€œauthorizedâ€ to perform specific actions.
		1. IAM Policy:  a JSON doc that defines permissions.  Policies are attached to Users, Groups, or Roles.  For example: 
    * `AWSLambdaBasicExecutionRole`: Minimum permission to write logs to CloudWatch.
    * `AWSLambdaVPCAccessExecutionRole`: Critical for allowing Lambda to connect to a VPC (and thus a private database).
    * `SecretsManagerReadWrite`: Permission to access encrypted credentials.

Key Concepts & Best Practices

â€¢ Root User: The account creator. Has access to everything. Rule: Do not use this for daily tasks; create an IAM user instead.

â€¢ Least-Privilege Access: The security standard of ensuring people and services only have the exact permissions they need to do their jobs.

â€¢ How it works together:

â€¢ The User/Group Path: John is a developer (User). We place John in a "Dev-Group." We attach a "Developer-Policy" to that Group. John now has those permissions.

â€¢ The Role Path: An EC2 instance needs to talk to S3. We create an "S3-Access-Role" and attach it to the instance. The instance "assumes" that role to get the job done.

3. Policy Structure

It might be worth adding the four main elements of a Policy (the "JSON" logic), as this often comes up in troubleshooting:

â€¢ Effect: Allow or Deny.

â€¢ Service (Action): What are they doing? (e.g., s3:GetObject).

â€¢ Resource: What specific thing are they doing it to? (e.g., my-bucket-name).

â€¢ Condition: Under what circumstances? (e.g., "only if they have MFA enabled").

Quick Comparison

User - permanent ID for a user
Group - a collection of users 
Role - a task / job / hat a user wears; this can change.  A role is just a container until we attach one or more policies.  â€œDeveloperâ€ is a role.  
Policy - a list of rules / permission list That define a role.  



## 2. VPC (Virtual Private Cloud) ðŸŒ
A generic "virtual computer network" in the cloud. It is a container for your resources.
* **CIDR Block:** The IP address range for your VPC (e.g., `10.0.0.0/16`).
    * `/32`: 1 specific IP address.
    * `/16`: A large range (65,536 addresses).
    * `0.0.0.0/0`: Represents **The Internet** (all possible addresses).

## 3. Subnets & Routing
* **Public Subnet:** Has a direct route to the internet via an **Internet Gateway (IGW)**. Used for Web Servers or Load Balancers.
* **Private Subnet:** No direct route to the internet. Used for sensitive resources like Databases.
* **NAT Gateway:** A one-way valve. Allows private resources (like Lambda) to send requests OUT (to APIs) but blocks incoming connections.
* **Route Table:** A GPS for network packets. Tells traffic where to go based on destination IP.
* **Security Groups:** A virtual firewall for specific resources. Checks packet IDs and ports (e.g., allowing traffic only on Port 5432).

## 4. Compute Services ðŸ’»
* **EC2 (Elastic Compute Cloud):**
    * *Analogy:* A Virtual Computer.
    * *Control:* High. You manage OS, patches, runtime.
    * *Use Case:* Long-running servers, Nginx, Databases.
* **AWS Lambda:**
    * *Analogy:* Functions-as-a-Service (Serverless).
    * *Control:* Low. You only provide code. AWS manages servers.
    * *Use Case:* Event-driven tasks, APIs, occasional data processing.
**Elastic Load Balancing (ELB):**
* Concept: A "traffic cop" that sits in front of your servers. It automatically distributes incoming application traffic across multiple targets (like EC2 instances, containers, or Lambda functions).
* Application Load Balancer (ALB): The specific type of ELB used for HTTP/HTTPS traffic (modern web apps). It operates at Layer 7 (Application Layer), meaning it can route traffic based on content (e.g., /api goes to Lambda, /images goes to S3).

Why use it?
* Scalability: If traffic spikes, the ALB spreads the load so no single server crashes.
* High Availability: It performs "Health Checks." If Server A crashes, the ALB stops sending traffic to it and redirects users to Server B instantly.
* Concrete Example: Imagine your Budget App goes viral. One EC2 instance can't handle 10,000 users. You launch 3 instances. Instead of giving users 3 different IP addresses, you give them one ALB URL (api.wildwoodrose.org). The ALB routes User 1 to Instance A, User 2 to Instance B, etc.

## 5. Storage & Databases ðŸ’¾
* **S3:** Object storage. Best for static files (images, frontend React apps).
* **DynamoDB:** NoSQL database. Fast, flexible schema.
* **RDS (Relational Database Service):** Managed SQL (PostgreSQL, MySQL).
    * *Aurora:* AWS proprietary high-performance SQL.
    * *Standard RDS:* Standard SQL engine (Cheaper).
* **Secrets Manager:** Securely stores passwords/API keys so they aren't in code.

## 6. Ways to Access AWS ðŸ› ï¸
* **Management Console:** The web-based GUI (good for learning/visualizing).
* **CLI (Command Line Interface):** Terminal commands (e.g., `aws s3 ls`). Used for scripting and automation.
* **SDK (Software Development Kit):** Controlling AWS via code (e.g., using Python/Boto3 or Node.js to upload files to S3).


## 1. Monitoring & Management ðŸ“Š

Amazon CloudWatch:

* Concept: The "Eyes and Ears" of your AWS account. It collects data in the form of Logs (text) and Metrics (numbers).

CloudWatch Logs:

* What it is: The standard output file for your services.
* Concrete Example: Your Lambda function crashes. You cannot SSH into a Lambda to debug it. Instead, you open CloudWatch Logs to read the specific error message: Error: Cannot find module 'pg'.

CloudWatch Metrics:

* What it is: Numerical data points over time (CPU usage, latency, error count).
* Concrete Example: You check the CPUUtilization metric graph for your RDS database. You see it hitting 95% every night at 2 AM. This tells you that you need to upgrade to a larger instance type.

CloudWatch Alarms:

* What it is: An automated trigger based on metrics.
* Concrete Example: You set an alarm: "If 5XX Error Rate > 5% for 2 minutes, send me an email via SNS."