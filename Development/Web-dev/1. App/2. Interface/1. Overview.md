# BFF & Edge Overview

## 1. What is this layer?
This folder (`1. BFF-Edge`) represents the **Entry Point** of your server. It is the first place a request lands when it leaves the Client (Browser).

Its primary job is **Translation**, **Protection**, and enforcing the **Contract**:
- It translates HTTP requests (JSON) into internal function calls.
- It protects the Core Server by validating data (Zod) and checking permissions (Auth) before any business logic runs.
- It acts as the **Interface** between the Client and the Server.

## 2. The Contract (Interface)
This layer defines the agreed-upon rules between the Frontend and Backend:
1.  **API Definition:** The endpoints and methods (REST, GraphQL) available to the client.
2.  **Validation (The Guard):** Using schemas (Zod, Yup) to ensure data integrity. E.g., "Stop! This password is too short."
3.  **Shared Types:** TypeScript interfaces shared between Frontend and Backend to ensure type safety across the network.
4.  **Gateway/Access:** Handling CORS, Rate Limiting, and Access Control ("Only admins can pass").

## 3. Concepts

### BFF (Backend for Frontend)
**The "Concierge" for your UI.**
- **Definition:** A server-side layer tightly coupled to a specific frontend user experience.
- **Role:** It aggregates and formats data specifically for the client.
- **In Next.js:** This is your **Route Handlers** (`app/api/.../route.ts`) and **Server Actions**.
- **Workflow:**
    1.  **Receive:** Client sends a POST request with form data.
    2.  **Validate:** BFF uses a Zod schema to ensure the data is correct.
    3.  **Delegate:** BFF calls the **Core Server** (Service Layer) to perform the actual business logic.
    4.  **Respond:** BFF formats the result and sends a JSON response (200 OK) or Error (400 Bad Request).

### Edge (The Network)
**The "Reception Desk" worldwide.**
- **Definition:** Computation that runs on a global network of servers (CDNs) rather than a single centralized server.
- **Role:** To execute logic physically closer to the user for maximum speed.
- **In Next.js:** This is often your **Middleware** (`middleware.ts`).
- **Use Cases:**
    - **Authentication:** Check cookies before the request even reaches your main server.
    - **Geolocation:** Redirect users based on their country.
    - **Routing:** Rewrite URLs for A/B testing.
- **Constraint:** Edge runtimes are lightweight and do not support all Node.js APIs (e.g., no direct filesystem access).