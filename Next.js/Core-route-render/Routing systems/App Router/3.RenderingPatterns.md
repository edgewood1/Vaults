
App Router: Rendering & Data
The App Router introduces a unified model for rendering and data fetching, marking a shift from the Pages Router.

**Server Components (The Default)**

In the App Router, all components inside app/ are Server Components by default.
 * Process: Rendered entirely on the server. Their JavaScript code is never sent to the client.
 * Client Receives: Pre-rendered HTML and the "RSC Payload" (a JSON tree describing the UI).
 * Capabilities:
   * Direct access to the backend (Database, Filesystem).
   * Keep sensitive API keys on the server (safe).
   * Reduced bundle size (dependencies used here don't bloat the client download).
 * Limitations:
   * No interactivity (no useState, useEffect, onClick).
   * No Browser APIs (no window, localStorage).

**Client Components**
To add interactivity, you must explicitly opt-in.
 * Syntax: Add 'use client' at the very top of the file.
 * Process: Rendered on the client (hydrated). Their code is included in the JavaScript bundle.
 * Capabilities:
   * State (useState, useReducer).
   * Lifecycle Effects (useEffect).
   * Event Listeners (onClick, onChange).
   * Browser APIs.
 * Limitations:
   * Cannot import Server Components directly. (However, you can pass a Server Component into a Client Component as a child or prop).

**Data Fetching (The Unified Model)**
Next.js extends the native web fetch() API to handle caching and revalidation. This replaces getStaticProps and getServerSideProps.

A. Automatic Caching (Like SSG)
By default, fetch requests are cached indefinitely.
// Similar to getStaticProps
fetch('https://api.example.com/data') 

B. Dynamic Fetching (Like SSR)
To fetch fresh data on every request (no cache).
// Similar to getServerSideProps
fetch('https://api.example.com/data', { cache: 'no-store' })

C. Revalidated Fetching (Like ISR)
To fetch fresh data periodically (e.g., every 60 seconds).
// Similar to revalidate prop
fetch('https://api.example.com/data', { next: { revalidate: 60 } })

**Rendering Patterns Summary**

| Pattern           | Implementation in App Router                                                                         |
| ----------------- | ---------------------------------------------------------------------------------------------------- |
| Static (SSG)      | Use Server Components with default fetch().                                                          |
| Server-Side (SSR) | Use Server Components with fetch(..., { cache: 'no-store' }) or dynamic functions (cookies/headers). |
| ISR               | Use Server Components with fetch(..., { next: { revalidate: X } }).                                  |
| Client-Side (CSR) | Use 'use client' components and fetch data inside useEffect (or use libraries like SWR/React Query). |

