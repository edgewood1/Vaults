
App Router: Special Files
In the App Router, folders define the path, but special reserved filenames define the UI and behavior of that path.

**The Essentials (UI & Structure)**
page.js (The UI)
 * Required: Yes (for the route to be accessible).
 * Purpose: Defines the specific UI for a route.
 * Props: Receives params (dynamic segment data) and searchParams (URL query strings).
 * Render: Server Component by default (can be Client).
layout.js (The Wrapper)
 * Required: Yes (at least one at the root).
 * Purpose: A shared UI that wraps the page.js and any child segments.
 * Behavior: Preserves state on navigation. It does not re-render when navigating between sibling pages.
 * The Root Layout: The top-level app/layout.js is mandatory. It must define the <html> and <body> tags (replacing the old _document.js).
template.js (The Reset Wrapper)
 * Purpose: Similar to a Layout, wraps the page content.
 * Difference: It creates a new instance on every navigation.
 * Use Case: When you need to reset state (like a timer) or trigger a useEffect animation every time the user navigates between pages.
default.js (Parallel Route Fallback)
 * Purpose: Used in Parallel Routes (@folder).
 * Behavior: Renders if Next.js cannot recover the active state of a slot after a page reload. It acts as a fallback UI for that specific slot.

**Feedback & Status**

loading.js (The Skeleton)
 * Purpose: Shows an instant loading UI while the route segment content is being fetched/rendered.
 * Mechanism: Automatically wraps the page in a React Suspense boundary.
 * Benefit: Makes the app feel instant even if data fetching is slow.
not-found.js (The 404)
 * Purpose: Rendered when the notFound() function is thrown, or when a URL doesn't match any route.
 * Scope: Can be placed in specific folders to create custom "Not Found" UIs for different sections of the app.

**Error Handling**

error.js (Segment Error)
 * Requirement: Must be a Client Component ('use client').
 * Purpose: Defines a React Error Boundary for the specific route segment.
 * Behavior: If an error occurs in the page.js, this UI replaces the page, but the surrounding layout.js remains interactive (so the user can navigate away).
 * Props: Receives error (the error object) and reset (a function to try reloading the route).
global-error.js (Root Error)
 * Purpose: Specifically handles errors that occur in the Root Layout.
 * Behavior: Since the Root Layout is broken, this file must define its own <html> and <body> tags to replace the entire screen.

**Data & Metadata**

route.js (API Handler)
 * Purpose: Creates a server-side API endpoint (returning JSON, plain text, etc.) rather than UI.
 * Constraint: Cannot exist in the same folder level as a page.js (you cannot have a URL that is both a UI page and an API endpoint).
 * Methods: Exports named functions like GET, POST, PUT, DELETE.
Metadata (Replacing head.tsx)
 * Note: The head.tsx file is deprecated.
 * New Way: Export a metadata object (static) or generateMetadata function (dynamic) directly from your layout.js or page.js.
<!-- end list -->
export const metadata = {
  title: 'My Page Title',
  description: 'My page description',
}

**5. Reference: Pages vs. App Router**

A cheat sheet for translating file concepts from the old Pages Router to the App Router.

| Feature | Pages Router (Old) | App Router (New) |
|---|---|---|
| HTML/Body Structure | _document.js | Root layout.js |
| Global Wrapper | _app.js | Root layout.js |
| Page Not Found | 404.js | not-found.js |
| General Errors | _error.js / 500.js | error.js |
| Critical Root Errors | N/A | global-error.js |
| API Routes | pages/api/*.js | app/*/route.js |

